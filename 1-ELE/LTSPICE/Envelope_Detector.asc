Version 4
SHEET 1 1172 680
WIRE -992 48 -992 16
WIRE -560 144 -624 144
WIRE -480 144 -496 144
WIRE -368 144 -480 144
WIRE -992 176 -992 128
WIRE -480 176 -480 144
WIRE -368 224 -368 144
WIRE -480 272 -480 240
WIRE -992 304 -992 256
WIRE -480 368 -480 352
WIRE -368 368 -368 304
WIRE -368 368 -480 368
WIRE -480 384 -480 368
WIRE -992 416 -992 384
FLAG -992 16 VIN
FLAG -992 416 0
FLAG -624 144 VIN
FLAG -368 144 VOUT
FLAG -480 384 0
SYMBOL cap -496 176 R0
SYMATTR InstName C1
SYMATTR Value 500n
SYMBOL res -384 208 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL voltage -992 288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 1 5k)
SYMBOL voltage -992 160 R0
WINDOW 0 46 28 Bottom 2
WINDOW 3 115 97 Top 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0 4 5k 2m)
SYMBOL voltage -992 32 R0
WINDOW 0 43 28 Bottom 2
WINDOW 3 122 87 Top 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value SINE(0 -2 5k 4m)
SYMBOL diode -560 160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL res -496 256 R0
SYMATTR InstName R2
SYMATTR Value 10
TEXT -728 368 Left 2 !.tran 0 6m 0
TEXT -200 56 Left 2 ;0. Assuming an AM-modulated signal as input, the goal of the circuit is to generate\n    a DC output voltage related to the amplitude of the AC input signal.\n1. The value of C shall be chosen in relation to the expected input signal frequency\n    (the higher F the lower C), and small enough to make it charge (when Vin > Vt =\n    0.6V and thus D1 on) fast but at the same time not too small to avoid too fast\n    discharges (when Vin < Vt and thus D1 off).\n2. R2 is inserted for safety purpose only to in order to put a resistance in series\n    to C during charging.\n3. R1 is the resistor used for the discharging of C while D1 is off. Increasing R1\n    makes the discharging slower, thus VOUT more stable but with a higher response\n    time in case of amplitude variations of the input voltage.\n4. Note the peak value of VOUT is equal to VIN amplitude minus Vt, i.e. the voltage\n    drop across D1.
